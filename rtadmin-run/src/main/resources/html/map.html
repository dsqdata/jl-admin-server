<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>昆明经开区网格化管理服务疫情防控洞察</title>
    <link rel="stylesheet" type="text/css" href="component/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="component/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="src/css/links.css">
    <script type="text/javascript" src="component/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="component/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
    <script type="text/javascript" src="component/echarts/echarts.js"></script>
    <script type="text/javascript" src="component/socket/socketClient.js"></script>

</head>
<body>
<div id="wrapper">
    <div id="header">
        <h1></h1>
        <p class="txtP">数据更新时间 <span>2020年2月29日</span></p>
    </div>
    <div id="container" class="clearfix">
        <div class="sideCon">
            <!--资源配置-->
            <div class="sideBox01">
                <h2 class="mapTbox">
                   <span class="mapT01"><span class="mapTbg01">资源配置</span></span>
                </h2>
                <ul class="list01">
                    <li class="li01"><div class="liBg"><p class="ln">网格长</p><strong>5</strong><span>人</span></div></li>
                    <li class="li02"><div class="liBg"><p class="ln">网格员</p><strong>5</strong><span>人</span></div></li>
                    <li class="li03"><div class="liBg"><p class="ln">楼栋长/单元长</p><strong>5</strong><span>人</span></div></li>
                    <li class="li04"><div class="liBg"><p class="ln">留验站点</p><strong>5</strong><span>人</span></div></li>
                    <li class="li05"><div class="liBg"><p class="ln">医护人员</p><strong>5</strong><span>位</span></div></li>
                    <li class="li06"><div class="liBg"><p class="ln">留观酒店</p><strong>5</strong><span>家</span></div></li>
                    <li class="li07"><p class="ln">警力支撑</p><strong>5</strong><span>人</span></li>
                    <li class="li08"><p class="ln">固定检查点</p><strong>5</strong><span>个</span></li>
                    <li class="li09"><p class="ln">视频卡口</p><strong>5</strong><span>个</span></li>
                </ul>
            </div>
            <!--资源配置 //-->
            <!--物资保障-->
            <div class="sideBox02">
                <h2 class="mapTbox">
                    <span class="mapT01"><span class="mapTbg01">物资保障</span></span>
                </h2>
                <div class="tbBox">
                <table class="tb01" cellpadding="10">
                    <tr>
                        <th>序号</th>
                        <th>日期</th>
                        <th>物资</th>
                        <th>入库</th>
                        <th>发出</th>
                        <th>结存</th>
                        <th>备注</th>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>20190909</td>
                        <td>口罩</td>
                        <td>100</td>
                        <td>100</td>
                        <td>100</td>
                        <td>全新</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>20190909</td>
                        <td>口罩</td>
                        <td>100</td>
                        <td>100</td>
                        <td>100</td>
                        <td>全新</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>20190909</td>
                        <td>口罩</td>
                        <td>100</td>
                        <td>100</td>
                        <td>100</td>
                        <td>全新</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>20190909</td>
                        <td>口罩</td>
                        <td>100</td>
                        <td>100</td>
                        <td>100</td>
                        <td>全新</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>20190909</td>
                        <td>口罩</td>
                        <td>100</td>
                        <td>100</td>
                        <td>100</td>
                        <td>全新</td>
                    </tr>
                </table>
                </div>
            </div>
            <!--物资保障 //-->
            <!--防控宣传-->
            <div class="sideBox03">
                <h2 class="mapTbox">
                    <span class="mapT01"><span class="mapTbg01">防控宣传</span></span>
                </h2>
                <div class="ycBox01 clearfix">
                    <div class="ycBox02">
                        <p class="ycTxt01">10,000,000人</p>
                        <p class="ycTxt02">+0<span>较昨日</span></p>
                        <p class="ycTxt03">受众人次</p>
                    </div>

                    <ul class="list02">
                        <li class="lia01"><strong>发放宣传资料</strong><span>10034 份 <em>+2 <i>较昨日</i></em></span></li>
                        <li class="lia02"><strong>微信群宣传</strong><span>10034 份 <em>+2 <i>较昨日</i></em></span></li>
                        <li class="lia03"><strong>LED宣传</strong><span>10034 份 <em>+2 <i>较昨日</i></em></span></li>
                        <li class="lia04"><strong>发送短信</strong><span>10034 份 <em>+2 <i>较昨日</i></em></span></li>
                        <li class="lia05"><strong>其他</strong><span>10034 份 <em>+2 <i>较昨日</i></em></span></li>
                    </ul>
                </div>
            </div>
            <!--防控宣传-->
        </div>
        <div class="midCon">

            <!--地图-->
            <div class="midBox01">
                <h2 class="mapTbox">
                    <span class="mapT01"><span class="mapTbg01">经济技术开发区</span></span>
                </h2>
                <span class="greenBg01"></span>
                <span class="greenBg02"></span>
                <span class="greenBg03"></span>
                <span class="greenBg04"></span>

                    <ul class="mapTxt">
                        <li><span><em>+20</em>较昨日</span><strong>9898</strong>现存确诊</li>
                        <li><span><em>+20</em>较昨日</span><strong>9898</strong>累计确诊</li>
                        <li><span><em>+20</em>较昨日</span><strong>9898</strong>现存疑似</li>
                        <li><span><em>+20</em>较昨日</span><strong>9898</strong>累计死亡</li>
                        <li><span><em>+20</em>较昨日</span><strong>9898</strong>现存重症</li>
                        <li><span><em>+20</em>较昨日</span><strong>9898</strong>累计治愈</li>
                    </ul>

                <div class="midBox01in">
                    <div class="mapMessbox">
                        <div class="mapMess">
                            <ul>
                                <li><span>2020/02/20 15:00:00</span>昆经开洛羊街道259号世贸大厦 有一市民未佩戴口罩</li>
                                <li><span>2020/02/20 15:00:00</span>昆经开洛羊街道259号世贸大厦 有一市民未佩戴口罩</li>
                                <li><span>2020/02/20 15:00:00</span>昆经开洛羊街道259号世贸大厦 有一市民未佩戴口罩</li>
                                <li><span>2020/02/20 15:00:00</span>昆经开洛羊街道259号世贸大厦 有一市民未佩戴口罩</li>
                            </ul>
                        </div>
                    </div>
                    <ul class="mapTab">
                        <li><a href="#" class="hover">现在确诊</a></li>
                        <li><a href="#">累计确诊</a></li>
                    </ul>
                </div>

                <div id="chart-panel"></div>

            </div>
            <!--地图 //-->
            <!--趋势图-->
            <div class="midBox02">

                <!-- Tab panes -->

                <div class="tab-content">

                    <div role="tabpanel" class="tab-pane active" id="tab01">

                            <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫情新增趋势图</span></span>
                            </h2>

                        <div id="chartLine01" class="chartSty01"></div>

                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab02">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫情现存疑似/确诊趋势图</span></span>
                        </h2>
                        <div id="chartLine02" class="chartSty01"></div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab03">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫情死亡/治愈病例趋势图</span></span>
                        </h2>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab04">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫情病死率趋势图</span></span>
                        </h2>

                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab05">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫情治愈率趋势图</span></span>
                        </h2>
                    </div>

                </div>
                <!-- Nav tabs -->
                <ul class="nav nav-tabs tab01" role="tablist">
                    <li role="presentation" class="active"><a href="#tab01" aria-controls="home" role="tab" data-toggle="tab">新增疑似/新增确诊</a></li>
                    <li role="presentation"><a href="#tab02" aria-controls="profile" role="tab" data-toggle="tab">现存确诊/现存疑似</a></li>
                    <li role="presentation"><a href="#tab03" aria-controls="messages" role="tab" data-toggle="tab">死亡/治愈</a></li>
                    <li role="presentation"><a href="#tab04" aria-controls="settings" role="tab" data-toggle="tab">病死率</a></li>
                    <li role="presentation"><a href="#tab05" aria-controls="settings" role="tab" data-toggle="tab">治愈率</a></li>
                </ul>


            </div>
            <!--趋势图 //-->
        </div>
        <div class="sideCon">
            <!--网格化排查及联防联控-->
            <div class="sideBox01">
                <h2 class="mapTbox">
                    <span class="mapT01"><span class="mapTbg01">网格化排查及联防联控</span></span>
                </h2>
                <div class="ycBox03">
                    <ul class="ycBox0301">
                        <li>
                            <div class="liBg">
                            <strong>发动参加排查人员总数</strong>
                            <p class="color01"><em>累计</em>2127人</p>
                            <p class="color02"><em>新增</em>2127人</p>
                            </div>
                        </li>
                        <li>
                            <div class="liBg">
                            <strong>微信群数量</strong>
                            <p class="color01"><em>累计</em>2127人</p>
                            <p class="color02"><em>新增</em>2127人</p>
                            </div>
                        </li>
                        <li>
                            <strong>排查总人数</strong>
                            <p class="color01"><i></i><em>累计</em>2127人</p>
                            <p class="color02"><i></i><em>新增</em>2127人</p>
                        </li>
                        <li>
                            <strong>微信群覆盖率</strong>
                            <p class="color01"><i></i><em>累计</em>2127人</p>
                            <p class="color02"><i></i><em>新增</em>2127人</p>
                        </li>
                    </ul>
                </div>
            </div>
            <!--网格化排查及联防联控 //-->
            <!--重点人员摸排-->
            <div class="sideBox02">
                <h2 class="mapTbox">
                    <span class="mapT01"><span class="mapTbg01">重点人员摸排</span></span>
                </h2>
                <div class="tab02Box clearfix">
                    <ul class="nav nav-tabs tab02" role="tablist">
                        <li role="presentation" class="active  liLft"><a href="#tab06" aria-controls="home" role="tab" data-toggle="tab">排查特殊人群数量</a></li>
                        <li role="presentation" class="liRgt"><a href="#tab07" aria-controls="profile" role="tab" data-toggle="tab">入住留验点人员</a></li>

                    </ul>
                </div>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="tab06">
                        <div id="chartPie01" class="chartSty02"></div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab07">
                        122
                    </div>

                </div>
            </div>
            <!--重点人员摸排 //-->
            <!--疫区来昆人员追踪-->
            <div class="sideBox03">
                <h2 class="mapTbox">
                    <span class="mapT01"><span class="mapTbg01">疫区来昆人员追踪</span></span>
                </h2>
                <div class="listTb">
                    <table class="tb02">
                        <colgroup>
                            <col width="150" />
                            <col width="*" />
                            <col width="18%" />
                        </colgroup>
                        <tr>
                            <th>总数</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                        <tr>
                            <th>入住指定得如家商旅</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                        <tr>
                            <th>入住指定得如家商旅</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                        <tr>
                            <th>入住指定得如家商旅</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                        <tr>
                            <th>入住指定得如家商旅</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                        <tr>
                            <th>入住指定得如家商旅</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                        <tr>
                            <th>入住指定得如家商旅</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                        <tr>
                            <th>入住指定得如家商旅</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                        <tr>
                            <th>入住指定得如家商旅</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                        <tr>
                            <th>入住指定得如家商旅</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                        <tr>
                            <th>入住指定得如家商旅</th>
                            <td><p class="lineBox"><span style="width: 20%"></span></p></td>
                            <td>12345人</td>
                        </tr>
                    </table>
                </div>

            </div>
            <!--疫区来昆人员追踪 //-->

        </div>
    </div>

</div>
<script src="component/jquery.liMarquee.js"></script>
<script src="./static/js/jquery.ajax.js"></script>
<script src="./static/js/echarts.map.js"></script>
<script type="text/javascript" src="src/js/chartLine01.js"></script>
<script type="text/javascript" src="src/js/chartLine02.js"></script>
<script type="text/javascript" src="src/js/chartPie01.js"></script>
<script>
    //消息滚动
    $('.mapMess').liMarquee({
        direction: 'up',
        scrolldelay:0,
        scrollamount: 10

    });

    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            if (pair[0] == variable) {
                return pair[1];
            }
        }
        return "";
    }

    var initZypz = function (jgId, jgName) {//初始化-资源配置
        $.axget("/api/yndp/zypz/findListByJgId?jgId=" + jgId, function (data) {
            console.log(data)
        });
    }

    var initWzbz = function (jgId, jgName) {//初始化-物资保障
        console.log("物资保障")
    }

    var initFkxc = function (jgId, jgName) {//初始化-防控宣传
        console.log("防控宣传")
    }

    var initMap = function (jgId,jgName) {
        $.getJSON(jiangxi, function (geoJson) {
            echarts.registerMap('经开区', geoJson);
            var myChart = echarts.extendsMap('chart-panel', {
                bgColor: '#404a59', // 画布背景色
                mapName: '经开区',    // 地图名
                goDown: true,       // 是否下钻
                // 下钻回调
                callback: function (name, option, instance) {
                    myChart.setInitData('经开区')
                }
            });

            myChart.setInitData('经开区')
        })
    }


    var initHtml = function (jgId, jgName) {
        initZypz(jgId, jgName)
        initWzbz(jgId, jgName)
        initFkxc(jgId, jgName)

        initMap(jgId, jgName)
    }
    $(document).ready(function () {
        initWebSocket(2,function(e){
            var jgId = e.jgId;
            var jgName = e.jgName;

            console.log("!!!!!"+jgId)
            console.log("!!!!!"+jgName)
            initHtml(jgId, jgName);
        })
        var jgId = getQueryVariable("jgId")
        var jgName = getQueryVariable("jgName")
        initHtml(jgId, jgName)
    });
</script>
</body>
</html>