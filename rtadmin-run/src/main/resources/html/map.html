<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>昆明经开区网格化管理服务疫情防控洞察</title>
    <link rel="stylesheet" type="text/css" href="component/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="component/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="src/css/links.css">
    <script type="text/javascript" src="component/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="component/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
    <script type="text/javascript" src="component/echarts/echarts.js"></script>
    <script type="text/javascript" src="static/js/template-web.js"></script>
    <script type="text/javascript" src="component/socket/socketConfig.js"></script>
    <script type="text/javascript" src="component/socket/socketClient.js"></script>

</head>
<body>
<div id="wrapper">
    <div id="header"></div>
    <script id="tpl-header" type="text/html">
        <h1 class="h02"></h1>
        <!--        <h1></h1>-->
        <p class="txtP">数据更新时间 <span>{{sjgxsj}}</span></p>
    </script>
    <!--    <div id="header">-->
    <!--        <h1></h1>-->
    <!--        <p class="txtP">数据更新时间 <span>2020年2月29日</span></p>-->
    <!--    </div>-->
    <div id="container" class="clearfix">
        <div class="sideCon">
            <!--资源配置-->
            <div class="sideBox01" id="orgBox01">
                <script id="tpl-orgBox01" type="text/html">>
                <h2 class="mapTbox">
                    <span class="mapT01"><span class="mapTbg01">资源配置</span></span>
                </h2>
                <ul class="list01">
                    <li class="li01"><div class="liBg"><p class="ln">网格长</p><strong>{{!wgz?'-':wgz}}</strong><span>人</span></div></li>
                    <li class="li02"><div class="liBg"><p class="ln">网格员</p><strong>{{wgy==null?'-':wgy}}</strong><span>人</span></div></li>
                    <li class="li03"><div class="liBg"><p class="ln">楼栋长/单元长</p><strong>{{ldz==null?'-':ldz}}</strong><span>人</span></div></li>
                    <li class="li04"><div class="liBg"><p class="ln">留验站点</p><strong>{{lyzd==null?'-':lyzd}}</strong><span>个</span></div></li>
                    <li class="li05"><div class="liBg"><p class="ln">医护人员</p><strong>{{yhry==null?'-':yhry}}</strong><span>人</span></div></li>
                    <li class="li06"><div class="liBg"><p class="ln">留观酒店</p><strong>{{lgjd==null?'-':lgjd}}</strong><span>家</span></div></li>
                    <li class="li07"><p class="ln">警力支撑</p><strong>{{jlzc==null?'-':jlzc}}</strong><span>人</span></li>
                    <li class="li08"><p class="ln">固定检查点</p><strong>{{gdjcd==null?'-':gdjcd}}</strong><span>个</span></li>
                    <li class="li09"><p class="ln">视频卡口</p><strong>{{spkk==null?'-':spkk}}</strong><span>个</span></li>
                </ul>
                </script>
            </div>
            <!--资源配置 //-->
            <!--物资保障-->
            <div class="sideBox02" id="orgBox02">
                <script id="tpl-orgBox02" type="text/html">
                    <h2 class="mapTbox">
                        <span class="mapT01"><span class="mapTbg01">物资保障</span></span>
                    </h2>
                    <div class="tbBox">
                        <div class="tb01Head">
                            <table class="tb01" cellpadding="10" >
                                <colgroup>
                                    <col width="10%" />
                                    <col width="20%" />
                                    <col width="*" />
                                    <col width="13%" />
                                    <col width="13%" />
                                    <col width="13%" />
                                    <col width="13%" />
                                </colgroup>
                                <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>日期</th>
                                    <th>物资</th>
                                    <th>入库</th>
                                    <th>发出</th>
                                    <th>结存</th>
                                    <th>备注</th>
                                </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="tb01Body">
                            <table class="tb01 mt0" cellpadding="10" >
                                <colgroup>
                                    <col width="10%" />
                                    <col width="20%" />
                                    <col width="*" />
                                    <col width="13%" />
                                    <col width="13%" />
                                    <col width="13%" />
                                    <col width="13%" />
                                </colgroup>
                                <tbody>
                                {{each wzbz item i}}
                                <tr>
                                    <td>{{i+1}}</td>
                                    <td>{{!item.rq?'-':item.rq}}</td>
                                    <td>{{item.wz==null?'-':item.wz}}</td>
                                    <td>{{item.rk==null?'-':item.rk}}</td>
                                    <td>{{item.fc==null?'-':item.fc}}</td>
                                    <td>{{item.jc==null?'-':item.jc}}</td>
                                    <td>{{item.bz==null?'-':item.bz}}</td>
                                </tr>
                                {{/each}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </script>
            </div>
            <!--物资保障 //-->
            <!--防控宣传-->
            <div class="sideBox03" id="orgBox03">
                <script id="tpl-orgBox03" type="text/html">
                    <h2 class="mapTbox">
                        <span class="mapT01"><span class="mapTbg01">防控宣传</span></span>
                    </h2>
                    <div class="ycBox01 clearfix">
                        <div class="ycBox02">
                            <p class="ycTxt01">{{szrc}}</p>
                            <p class="ycTxt02">
                                <% if (szrcjzr>0) { %>+ <% } %> {{szrcjzr}}<span>较昨日</span></p>
                            <p class="ycTxt03">受众人次</p>
                        </div>

                        <ul class="list02">
                            <li class="lia01"><strong>发放宣传资料</strong><span>{{ffxczl}} 份 <em><% if (ffxczljzr>0) { %>+ <% } %>{{ffxczljzr}} <i>较昨日</i></em></span></li>
                            <li class="lia02"><strong>微信群宣传</strong><span>{{wxqxc}} 份 <em><% if (wxqxcjzr>0) { %>+ <% } %>{{wxqxcjzr}} <i>较昨日</i></em></span></li>
                            <li class="lia03"><strong>LED宣传</strong><span>{{ledxc}} 份 <em><% if (ledxcjzr>0) { %>+ <% } %>{{ledxcjzr}} <i>较昨日</i></em></span></li>
                            <li class="lia04"><strong>发送短信</strong><span>{{fsdx}} 份 <em><% if (fsdxjzr>0) { %>+ <% } %>{{fsdxjzr}} <i>较昨日</i></em></span></li>
                            <li class="lia05"><strong>其他</strong><span>{{qt}} 份 <em><% if (qtjzr>0) { %>+ <% } %>{{qtjzr}} <i>较昨日</i></em></span></li>
                        </ul>
                    </div>
                </script>
            </div>
            <!--防控宣传-->
        </div>
        <div class="midCon">

            <!--地图-->
            <div class="midBox01" >
                <div id="orgBox06" style="height:100%"></div>
                <script id="tpl-orgBox06" type="text/html">
                    <h2 class="mapTbox">
                        <span class="mapT01"><span class="mapTbg01">网格化管理区划图</span></span>
                    </h2>
                    <span class="greenBg01"></span>
                    <span class="greenBg02"></span>
                    <span class="greenBg03"></span>
                    <span class="greenBg04"></span>
                    <ul class="mapTxt">
                        <li><span><em><% if (b.xcqzjzr>0) { %>+ <% } %>{{b.xcqzjzr==null?'-':b.xcqzjzr}}</em>较昨日</span><strong>{{b.xcqz==null?'-':b.xcqz}}</strong>现存确诊</li>
                        <li><span><em><% if (b.ljqzjzr>0) { %>+ <% } %>{{b.ljqzjzr==null?'-':b.ljqzjzr}}</em>较昨日</span><strong>{{b.ljqz==null?'-':b.ljqz}}</strong>累计确诊</li>
                        <li><span><em><% if (b.xcysjzr>0) { %>+ <% } %>{{b.xcysjzr==null?'-':b.xcysjzr}}</em>较昨日</span><strong>{{b.xcys==null?'-':b.xcys}}</strong>现存疑似</li>
                        <li><span><em><% if (b.ljswjzr>0) { %>+ <% } %>{{b.ljswjzr==null?'-':b.ljswjzr}}</em>较昨日</span><strong>{{b.ljsw==null?'-':b.ljsw}}</strong>累计死亡</li>
                        <li><span><em><% if (b.xczzjzr>0) { %>+ <% } %>{{b.xczzjzr==null?'-':b.xczzjzr}}</em>较昨日</span><strong>{{b.xczz==null?'-':b.xczz}}</strong>现存重症</li>
                        <li><span><em><% if (b.ljzyjzr>0) { %>+ <% } %>{{b.ljzyjzr==null?'-':b.ljzyjzr}}</em>较昨日</span><strong>{{b.ljzy==null?'-':b.ljzy}}</strong>累计治愈</li>
                    </ul>

                    <div class="midBox01in">
                        <!--<div class="mapMessbox">
                            <div class="mapMess">
                                <ul>
                                    {{each a item i}}
                                    <li><span>{{item.sjfssj}}</span>{{item.sj}}</li>
                                    {{/each}}
                                 &lt;!&ndash;   <li><span>2020/02/20 15:00:00</span>昆经开洛羊街道259号世贸大厦 有一市民未佩戴口罩</li>
                                    <li><span>2020/02/20 15:00:00</span>昆经开洛羊街道259号世贸大厦 有一市民未佩戴口罩</li>
                                    <li><span>2020/02/20 15:00:00</span>昆经开洛羊街道259号世贸大厦 有一市民未佩戴口罩</li>
                                    <li><span>2020/02/20 15:00:00</span>昆经开洛羊街道259号世贸大厦 有一市民未佩戴口罩</li>&ndash;&gt;
                                </ul>
                            </div>
                        </div>-->
                        <ul class="mapTab">
                            <li><a href="javascript:void(0)" class="hover" onclick="searchMap('1','{{jgId}}','{{jgName}}')" id="btn01">现存确诊</a></li>
                            <li><a href="javascript:void(0)" onclick="searchMap('2','{{jgId}}','{{jgName}}')" id="btn02">累计确诊</a></li>
                        </ul>
                    </div>
                </script>

                <div id="chart-panel"></div>
            </div>
            <!--地图 //-->
            <!--趋势图-->
            <div class="midBox02">

                <!-- Tab panes -->

                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="tab01">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫情新增趋势图</span></span>
                        </h2>
                        <div id="chartLine01" class="chartSty01"></div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab02">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫情现存疑似/确诊趋势图</span></span>
                        </h2>
                        <div id="chartLine02" class="chartSty01"></div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab03">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫情死亡/治愈病例趋势图</span></span>
                        </h2>
                        <div id="chartLine03" class="chartSty01"></div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab04">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫情病死率趋势图</span></span>
                        </h2>
                        <div id="chartLine04" class="chartSty01"></div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab05">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫情治愈率趋势图</span></span>
                        </h2>
                        <div id="chartLine05" class="chartSty01"></div>
                    </div>
                    <!--网格化排查-->
                    <div role="tabpanel" class="tab-pane" id="tabWghpc">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">网格化排查工作情况</span></span>
                        </h2>
                        <div id="secondWghpcgzqkCharLine" class="chartSty01"></div>
                    </div>
                    <!--联防联控工作情况-->
                    <div role="tabpanel" class="tab-pane" id="tabLflk">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">联防联控工作情况</span></span>
                        </h2>
                        <div id="secondLflkChartLine" class="chartSty01"></div>
                    </div>
                    <!--排查特殊人群情况-->
                    <div role="tabpanel" class="tab-pane" id="tabPctsrqqk">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">排查特殊人群情况</span></span>
                        </h2>
                        <div id="secondPctsrqqkBar" class="chartSty01"></div>
                    </div>
                    <!--入住留验点人员情况-->
                    <div role="tabpanel" class="tab-pane" id="tabRzlydry">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">入住留验点人员情况</span></span>
                        </h2>
                        <div id="secondRzlydryBar" class="chartSty01"></div>
                    </div>
                    <!--登记在册人员排查-->
                    <div role="tabpanel" class="tab-pane" id="tabDjzcrypc">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">登记在册人员排查</span></span>
                        </h2>
                        <div id="secondDjzcrypcBar" class="chartSty01"></div>
                    </div>
                    <!--公安检查点排查情况-->
                    <div role="tabpanel" class="tab-pane" id="tabGajcdpcqk">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">公安检查点排查情况</span></span>
                        </h2>
                        <div id="secondGajcdpcqkBar" class="chartSty01"></div>
                    </div>
                    <!--疫区来昆人员统计-->
                    <div role="tabpanel" class="tab-pane" id="tabYqlkrytj">
                        <h2 class="mapTbox01">
                            <span class="mapT01"><span class="mapTbg01">疫区来昆人员统计</span></span>
                        </h2>
                        <div id="secondYqlkrytjChartLine" class="chartSty01"></div>
                    </div>

                </div>
                <!-- Nav tabs -->
<!--                <ul class="nav nav-tabs tab01" role="tablist" id="tab_btn">-->
<!--                    <li role="presentation" class="active"><a href="#tab01" aria-controls="home" role="tab" data-toggle="tab">新增疑似/新增确诊</a></li>-->
<!--                    <li role="presentation"><a href="#tab02" aria-controls="profile" role="tab" data-toggle="tab">现存确诊/现存疑似</a></li>-->
<!--                    <li role="presentation"><a href="#tab03" aria-controls="messages" role="tab" data-toggle="tab">死亡/治愈</a></li>-->
<!--                    <li role="presentation"><a href="#tab04" aria-controls="settings" role="tab" data-toggle="tab">病死率</a></li>-->
<!--                    <li role="presentation"><a href="#tab05" aria-controls="settings" role="tab" data-toggle="tab">治愈率</a></li>-->
<!--                    &lt;!&ndash;网格化排查&ndash;&gt;-->
<!--                    <li role="presentation"><a href="#tabWghpc" aria-controls="settings" role="tab" data-toggle="tab">网格化排查人数</a></li>-->
<!--                    &lt;!&ndash;联防联控工作情况&ndash;&gt;-->
<!--                    <li role="presentation"><a href="#tabLflk" aria-controls="settings" role="tab" data-toggle="tab">联防联控工作开展</a></li>-->
<!--                    &lt;!&ndash;排查特殊人群情况&ndash;&gt;-->
<!--                    <li role="presentation" id="btn_tabPctsrqqk"><a href="#tabPctsrqqk" aria-controls="settings" role="tab" data-toggle="tab">排查特殊人群情况</a></li>-->
<!--                    &lt;!&ndash;入住留验点人员情况&ndash;&gt;-->
<!--                    <li role="presentation" id="btn_tabRzlydry"><a href="#tabRzlydry" aria-controls="settings" role="tab" data-toggle="tab">入住留验点人员情况</a></li>-->
<!--                    &lt;!&ndash;登记在册人员排查&ndash;&gt;-->
<!--                    <li role="presentation" id="btn_tabDjzcrypc"><a href="#tabDjzcrypc" aria-controls="settings" role="tab" data-toggle="tab">登记在册人员排查</a></li>-->
<!--                    &lt;!&ndash;公安检查点排查情况&ndash;&gt;-->
<!--                    <li role="presentation" id="btn_tabGajcdpcqk"><a href="#tabGajcdpcqk" aria-controls="settings" role="tab" data-toggle="tab">公安检查点排查情况</a></li>-->
<!--                    &lt;!&ndash;疫区来昆人员统计&ndash;&gt;-->
<!--                    <li role="presentation"><a href="#tabYqlkrytj" aria-controls="settings" role="tab" data-toggle="tab">疫区来昆人员统计</a></li>-->
<!--                </ul>-->

                <div class="tab01Wrap">
                    <ul class="nav nav-tabs tab01" role="tablist" id="tab_btn">
<!--                        <li role="presentation" class="active page01"><a href="#tab01" aria-controls="home" role="tab" data-toggle="tab">新增疑似/新增确诊</a></li>-->
<!--                        <li role="presentation" class="page01"><a href="#tab02" aria-controls="profile" role="tab" data-toggle="tab">现存确诊/现存疑似</a></li>-->
<!--                        <li role="presentation" class="page01"><a href="#tab03" aria-controls="messages" role="tab" data-toggle="tab">死亡/治愈</a></li>-->
<!--                        <li role="presentation" class="page01"><a href="#tab04" aria-controls="settings" role="tab" data-toggle="tab">病死率</a></li>-->
<!--                        <li role="presentation" class="page01"><a href="#tab05" aria-controls="settings" role="tab" data-toggle="tab">治愈率</a></li>-->
<!--                        <li role="presentation" class="page02"><a href="#tab01a" aria-controls="home" role="tab" data-toggle="tab">网格化排查人数</a></li>-->
<!--                        <li role="presentation" class="page02"><a href="#tab01b" aria-controls="profile" role="tab" data-toggle="tab">联防联控工作展开</a></li>-->
<!--                        <li role="presentation" class="page02"><a href="#tab01c" aria-controls="messages" role="tab" data-toggle="tab">排查特殊人群数量</a></li>-->
<!--                        <li role="presentation" class="page02"><a href="#tab01d" aria-controls="settings" role="tab" data-toggle="tab">入住留验点人员数量</a></li>-->
<!--                        <li role="presentation" class="page02"><a href="#tab01e" aria-controls="settings" role="tab" data-toggle="tab">疫区来昆人员统计</a></li>-->

                        <li role="presentation" class="active page01" id="xzysOrXzqz"><a href="#tab01" aria-controls="home" role="tab" data-toggle="tab">新增疑似/新增确诊</a></li>
                        <li role="presentation" class="page01"><a href="#tab02" aria-controls="profile" role="tab" data-toggle="tab">现存确诊/现存疑似</a></li>
                        <li role="presentation" class="page01"><a href="#tab03" aria-controls="messages" role="tab" data-toggle="tab">死亡/治愈</a></li>
                        <li role="presentation" class="page01"><a href="#tab04" aria-controls="settings" role="tab" data-toggle="tab">病死率</a></li>
                        <li role="presentation" class="page01"><a href="#tab05" aria-controls="settings" role="tab" data-toggle="tab">治愈率</a></li>
                        <!--网格化排查-->
                        <li role="presentation" class="page02"><a href="#tabWghpc" aria-controls="home" role="tab" data-toggle="tab">网格化排查人数</a></li>
                        <!--联防联控工作情况-->
                        <li role="presentation" class="page02"><a href="#tabLflk" aria-controls="profile" role="tab" data-toggle="tab">联防联控工作开展</a></li>
                        <!--排查特殊人群情况-->
                        <li role="presentation" class="page03" id="btn_tabPctsrqqk" style="margin:0 0 0 9px;"><a onclick="changeRight('pctsrqqk');" style="padding: 8px 12px;" href="#tabPctsrqqk" aria-controls="messages" role="tab" data-toggle="tab">排查特殊人群情况</a></li>
                        <!--入住留验点人员情况-->
                        <li role="presentation" class="page03" id="btn_tabRzlydry" style="margin:0 0 0 9px;"><a onclick="changeRight('rzlydryqk');" style="padding: 8px 12px;" href="#tabRzlydry" aria-controls="settings" role="tab" data-toggle="tab">入住留验点人员情况</a></li>
                        <!--登记在册人员排查-->
                        <li role="presentation" class="page04" id="btn_tabDjzcrypc" style="margin:0 0 0 9px;"><a  onclick="changeRight('djzc');" style="padding: 8px 12px;" href="#tabDjzcrypc" aria-controls="messages" role="tab" data-toggle="tab">登记在册人员排查</a></li>
                        <!--公安检查点排查情况-->
                        <li role="presentation" class="page04" id="btn_tabGajcdpcqk" style="margin:0 0 0 9px;"><a onclick="changeRight('gajcdpcqk');" style="padding: 8px 12px;" href="#tabGajcdpcqk" aria-controls="settings" role="tab" data-toggle="tab">公安检查点排查情况</a></li>
                        <!--疫区来昆人员统计-->
                        <li role="presentation" class="page02" ><a href="#tabYqlkrytj" aria-controls="settings" role="tab" data-toggle="tab">疫区来昆人员统计</a></li>
                    </ul>
                    <span id="orgBoxBottomSwitch">
                            <a class="sPrev"></a>
                            <a class="sNext hover"></a>
                         <script id="tpl-orgBoxBottomSwitch" type="text/html">
                            <a value="{{type}}" class="sPrev"></a>
                            <a value="{{type}}" class="sNext hover"></a>
                         </script>
                    </span>
                </div>


            </div>
            <!--趋势图 //-->
        </div>
        <div class="sideCon">
            <!--网格化排查及联防联控-->
            <div class="sideBox01" id="orgBox04">
                <script id="tpl-orgBox04" type="text/html">
                    <h2 class="mapTbox">
                        <span class="mapT01"><span class="mapTbg01">网格化排查及联防联控</span></span>
                    </h2>
                    <div class="ycBox03">
                        <ul class="ycBox0301">
<!--                            <li>-->
                            <li  onclick="toggleChart('wghpc');">
                                <div class="liBg">
                                    <strong>发动参加排查人员总数</strong>
                                    <p class="color01"><em>累计</em>{{fdcjpcryzslj}}人</p>
                                    <p class="color02"><em>新增</em>{{fdcjpcryzsxz}}人</p>
                                </div>
                            </li>
<!--                            <li>-->
                            <li  onclick="toggleChart('lflk');">
                                <div class="liBg">
                                    <strong>微信群数量</strong>
                                    <p class="color01"><em>累计</em>{{wxqsllj}}个</p>
                                    <p class="color02"><em>新增</em>{{wxqslxz}}个</p>
                                </div>
                            </li>
<!--                            <li>-->
                            <li onclick="toggleChart('wghpc');">
                                <strong>排查总人数</strong>
                                <p class="color01"><i></i><em>累计</em>{{pczrslj}}人</p>
                                <p class="color02"><i></i><em>新增</em>{{pczrsxz}}人</p>
                            </li>
<!--                            <li>-->
                            <li onclick="toggleChart('lflk');">
                                <strong>微信群覆盖率</strong>
                                <p class="color01"><i></i><em>累计</em>{{(fxqfgllj*100)}}%</p>
                                <p class="color02"><i></i><em>新增</em>{{(fxqfglxz*100)}}%</p>
                            </li>
                        </ul>
                    </div>
                </script>
            </div>
            <!--网格化排查及联防联控 //-->
            <!--重点人员摸排-->
            <div class="sideBox02">
                <h2 class="mapTbox">
                    <span class="mapT01"><span class="mapTbg01">重点人员摸排</span></span>
                </h2>
                <div class="tab02Box clearfix">
                    <ul class="nav nav-tabs tab02" role="tablist">
<!--                        <li role="presentation" class="active  liLft" id="tab06title"><a href="#tab06" aria-controls="home" role="tab" data-toggle="tab" id="tab1">排查特殊人群数量</a></li>-->
<!--                        <li role="presentation" class="liRgt" id="tab07title"><a href="#tab07" aria-controls="profile" role="tab" data-toggle="tab">入住留验点人员</a></li>-->
<!--                        <li role="presentation" class="active  liLft" style="display: none" id="tab08title"><a href="#tab08" aria-controls="home" role="tab" data-toggle="tab" id="tab2">登记在册人员排查</a></li>-->
<!--                        <li role="presentation" class="liRgt" style="display: none;" id="tab09title"><a href="#tab09" aria-controls="profile" role="tab" data-toggle="tab">公安检查点排查</a></li>-->

                        <li role="presentation" class="active  liLft" id="tab06title"  onclick="toggleChart('pctsrqqk');"><a href="#tab06" aria-controls="home" role="tab" data-toggle="tab" id="tab1">排查特殊人群数量</a></li>
                        <li role="presentation" class="liRgt" id="tab07title"  onclick="toggleChart('rzlydry');"><a href="#tab07" aria-controls="profile" role="tab" data-toggle="tab" id="tab3">入住留验点人员</a></li>
                        <li role="presentation" class="active  liLft" style="display: none" id="tab08title"  onclick="toggleChart('djzcrypc');"><a href="#tab08" aria-controls="home" role="tab" data-toggle="tab" id="tab2">登记在册人员排查</a></li>
                        <li role="presentation" class="liRgt" style="display: none;" id="tab09title"  onclick="toggleChart('gajcdpcqk');"><a href="#tab09" aria-controls="profile" role="tab" data-toggle="tab" id="tab4">公安检查点排查</a></li>

                    </ul>
                </div>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="tab06">
                        <div id="chartPie01" class="chartSty02"></div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab07">
                        <div id="chartPie02" class="chartSty02"></div>
                    </div>

                    <div role="tabpanel" class="tab-pane active" id="tab08">
                        <div id="chartPie03" class="chartSty02"></div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="tab09">
                        <div id="chartPie04" class="chartSty02"></div>
                    </div>

                </div>
            </div>
            <!--重点人员摸排 //-->
            <!--疫区来昆人员追踪-->
            <div class="sideBox03" id="orgBox05">
                <script id="tpl-orgBox05" type="text/html">
<!--                    <h2 class="mapTbox">-->
                    <h2 class="mapTbox"  onclick="toggleChart('yqlkrytj');">
                        <span class="mapT01"><span class="mapTbg01">疫区来昆人员追踪</span></span>
                    </h2>

                    <div class="listTb">
                        <table class="tb02">
                            <colgroup>
                                <col width="30%" />
                                <col width="53%" />
                                <col width="17%" />
                            </colgroup>
                            <!--折线图-->
                            <tr class="tbLine">
                                <td colspan="3">
                                    <p class="tbLineTxt">总数 <strong>{{sumNum}}</strong><span>人</span></p >
                                    <div id="chartLine11" style=" height: 90px; width: 490px;"></div>
                                </td>
                            </tr>
                            <!--                        <tr class="tbBar">-->
                            <!--                            <th>总数</th>-->
                            <!--                            <td><p class="lineBox"><span style="width: 0"></span></p ></td>-->
                            <!--                            <td>12345人</td>-->
                            <!--                        </tr>-->
                            {{each ryzz item i}}

                            <% if (item.rylx=='总数') { %>
                            <% if (ryzz[0].rysl==0) { %>
                            <tr class="tbBar">
                                <th>{{item.rylx}}</th>
                                <td><p class="lineBox"> <span style="width: 0%"></span></p></td>
                                <td>{{item.rysl}}</td>
                            </tr>
                            <% } else { %>
                            <tr class="tbBar">
                                <th>{{item.rylx}}</th>
                                <td><p class="lineBox"> <span style="width: 100%"></span></p></td>
                                <td>{{item.rysl}}</td>
                            </tr>
                            <% } %>
                            <% } else { %>
                            <% if (ryzz[0].rysl==0) { %>
                            <tr>
                                <th>{{item.rylx}}</th>
                                <td><p class="lineBox"> <span style="width: 0%"></span></p></td>
                                <td>{{item.rysl}}</td>
                            </tr>
                            <% } else { %>
                            <tr>
                                <th>{{item.rylx}}</th>
                                <td><p class="lineBox"> <span style="width: {{(item.rysl/ ryzz[0].rysl)*100}}%"></span></p></td>
                                <td>{{item.rysl}}</td>
                            </tr>
                            <% } %>
                            <% } %>

                            {{/each}}

                        </table>
                    </div>
                </script>
            </div>
            <!--疫区来昆人员追踪 //-->

        </div>
    </div>

</div>
<script src="component/jquery.liMarquee.js"></script>
<script src="./static/js/jquery.ajax.js"></script>
<script src="./static/js/echarts.map.js"></script>
<script type="text/javascript" src="src/js/chartLine01.js"></script>
<script type="text/javascript" src="src/js/chartLine02.js"></script>
<script type="text/javascript" src="src/js/chartLine03.js"></script>
<script type="text/javascript" src="src/js/chartLine04.js"></script>
<script type="text/javascript" src="src/js/chartLine05.js"></script>
<script type="text/javascript" src="src/js/chartPie01.js"></script>
<script type="text/javascript" src="src/js/chartPie02.js"></script>
<script type="text/javascript" src="src/js/chartPie03.js"></script>
<script type="text/javascript" src="src/js/chartPie04.js"></script>
<!--<script type="text/javascript" src="src/js/chartLine11.js"></script>-->

<!--网格化排查-->
<script type="text/javascript" src="src/js/secondWghpcgzqkChartLine.js"></script>
<!--联防联控工作情况-->
<script type="text/javascript" src="src/js/secondLflkChartLine.js"></script>
<!--排查特殊人群情况-->
<script type="text/javascript" src="src/js/secondPctsrqqkBar.js"></script>
<!--入住留验点人员情况-->
<script type="text/javascript" src="src/js/secondRzlydryBar.js"></script>
<!--登记在册人员排查-->
<script type="text/javascript" src="src/js/secondDjzcrypcBar.js"></script>
<!--公安检查点排查情况-->
<script type="text/javascript" src="src/js/secondGajcdpcqkBar.js"></script>
<!--疫区来昆人员统计-->
<script type="text/javascript" src="src/js/secondYqlkrytjChartLine.js"></script>

<script>
    var initTime = function (data) {
        var arr = data.sjgxsj.split('-');
        // console.log(arr);
        var time = arr[0]+"年"+arr[1]+"月"+arr[2]+"日";
        var html = template('tpl-header', {sjgxsj: time});
        document.getElementById('header').innerHTML = html;
    }

    function searchMap(type,jgId,jgName) {//初始化-资源配置
        // console.log("type==="+type);
        // debugger;
        if(type === 1 || type === '1' ){
            $("#btn02").removeClass('hover')
            $("#btn01").addClass('hover')
        }else{
            $("#btn01").removeClass('hover')
            $("#btn02").addClass('hover')
        }
        $.axget("/api/yndp/map/getMapList?jgId="+jgId+"&qzlx="+type, function (res) {

            setMyMapChartData(res.data,jgName);
        });
    }

    var initOrgBox01 = function (data) {
        if(data){
            var html = template('tpl-orgBox01', data);
            document.getElementById('orgBox01').innerHTML = html;
        }else{
            var html = template('tpl-orgBox01', {});
            document.getElementById('orgBox01').innerHTML = html;

        }
    }

    var initOrgBox02 = function (data) {
        if(data.length != 0){
            var html = template('tpl-orgBox02', {
                wzbz: data
            });
            document.getElementById('orgBox02').innerHTML = html;
        }else {
            var html = template('tpl-orgBox02', {
                wzbz: [{}, {}, {}, {}, {}]
            });
            document.getElementById('orgBox02').innerHTML = html;
        }
        $('.tb01Body').liMarquee({
            direction: 'up',
            scrolldelay:0,
            scrollamount: 10

        });

    }

    var initOrgBox03 = function (data) {
        var szrc ='-';
        var szrcjzr ='-';
        var ffxczl ='-';
        var ffxczljzr ='-';

        var wxqxc ='-';
        var wxqxcjzr ='-';
        var ledxc ='-';
        var ledxcjzr ='-';

        var fsdx ='-';
        var fsdxjzr ='-';
        var qt ='-';
        var qtjzr ='-';
        if(data!=null && data!=""&&data.length>0){
            if(data[0].szrc!=null && data[0].szrc!=""){
                szrc=data[0].szrc;
            }
            if(data[0].szrcjzr!=null && data[0].szrcjzr!=""){
                szrcjzr=data[0].szrcjzr;
            }
            if(data[0].ffxczl!=null && data[0].ffxczl!=""){
                ffxczl=data[0].ffxczl;
            }
            if(data[0].ffxczljzr!=null && data[0].ffxczljzr!=""){
                ffxczljzr=data[0].ffxczljzr;
            }
            if(data[0].wxqxc!=null && data[0].wxqxc!=""){
                wxqxc=data[0].wxqxc;
            }
            if(data[0].wxqxcjzr!=null && data[0].wxqxcjzr!=""){
                wxqxcjzr=data[0].wxqxcjzr;
            }
            if(data[0].lecxc!=null && data[0].lecxc!=""){
                ledxc=data[0].lecxc;
            }
            if(data[0].lecxcjzr!=null && data[0].lecxcjzr!=""){
                ledxcjzr=data[0].lecxcjzr;
            }

            if(data[0].fsdx!=null && data[0].fsdx!=""){
                fsdx=data[0].fsdx;
            }
            if(data[0].fsdxjzr!=null && data[0].fsdxjzr!=""){
                fsdxjzr=data[0].fsdxjzr;
            }
            if(data[0].qt!=null && data[0].qt!=""){
                qt=data[0].qt;
            }
            if(data[0].qtjzr!=null && data[0].qtjzr!=""){
                qtjzr=data[0].qtjzr;
            }
        }

        var html = template('tpl-orgBox03',{
            szrc: szrc,
            szrcjzr: szrcjzr,
            ffxczl: ffxczl,
            ffxczljzr: ffxczljzr,

            wxqxc: wxqxc,
            wxqxcjzr: wxqxcjzr,
            ledxc: ledxc,
            ledxcjzr: ledxcjzr,

            fsdx: fsdx,
            fsdxjzr: fsdxjzr,
            qt: qt,
            qtjzr: qtjzr
        });
        document.getElementById('orgBox03').innerHTML = html;
    }

    var initOrgBox04 = function (data) {
        var fdcjpcryzslj ='-';
        var fdcjpcryzsxz ='-';
        var wxqsllj ='-';
        var wxqslxz ='-';
        var pczrslj ='-';
        var pczrsxz ='-';
        var fxqfgllj ='-';
        var fxqfglxz ='-';
        if(data!=null && data!=""&&data.length>0){
            if(data[0].fdcjpcryzslj!=null && data[0].fdcjpcryzslj!=""){
                fdcjpcryzslj=data[0].fdcjpcryzslj;
            }
            if(data[0].fdcjpcryzsxz!=null && data[0].fdcjpcryzsxz!=""){
                fdcjpcryzsxz=data[0].fdcjpcryzsxz;
            }
            if(data[0].wxqsllj!=null && data[0].wxqsllj!=""){
                wxqsllj=data[0].wxqsllj;
            }
            if(data[0].wxqslxz!=null && data[0].wxqslxz!=""){
                wxqslxz=data[0].wxqslxz;
            }
            if(data[0].pczrslj!=null && data[0].pczrslj!=""){
                pczrslj=data[0].pczrslj;
            }
            if(data[0].pczrsxz!=null && data[0].pczrsxz!=""){
                pczrsxz=data[0].pczrsxz;
            }
            if(data[0].fxqfgllj!=null && data[0].fxqfgllj!=""){
                fxqfgllj=data[0].fxqfgllj;
            }
            if(data[0].fxqfglxz!=null && data[0].fxqfglxz!=""){
                fxqfglxz=data[0].fxqfglxz;
            }
        }
        var html = template('tpl-orgBox04',{
            fdcjpcryzslj: fdcjpcryzslj,
            fdcjpcryzsxz: fdcjpcryzsxz,
            wxqsllj: wxqsllj,
            wxqslxz: wxqslxz,
            pczrslj: pczrslj,
            pczrsxz: pczrsxz,
            fxqfgllj: fxqfgllj,
            fxqfglxz: fxqfglxz
        });
        document.getElementById('orgBox04').innerHTML = html;
    }

    var initOrgBox05 = function (data,sumChart) {

        var MaxY = 1000000;
        var sumArr = [];
        var rqArr = [];
        var sum = 0;
        for (let i = 0; i < sumChart.length; i++) {
            if(sumChart[i].rysl!=null){
                sumArr.push(sumChart[i].rysl);
                rqArr.push(sumChart[i].rq);
                sum += parseInt(sumChart[i].rysl);
            }
        }

        //获取Y轴最大值
        MaxY =  Math.max.apply(null,sumArr);
        if (MaxY==-Infinity){
            MaxY=1000000;
        }
        // console.log("MaxY="+MaxY);
        // console.log(sumArr);
        // console.log(rqArr);
        // console.log(sum);


        var html = template('tpl-orgBox05', {
            ryzz: data,
            sumNum:sum
        });
        document.getElementById('orgBox05').innerHTML = html;


        var myChart11 = echarts.init(document.getElementById('chartLine11'));
        var option = {
            color: ['#72d7e9', '#f5e665'],

            tooltip: {
                trigger: 'axis',
                padding: [10, 10],
                backgroundColor: 'rgba(0,0,0,0.7)',
                extraCssText: 'border: 1px solid #422931',
                formatter: '{b}<br/>{c}人'
            },

            grid: {
                left: 0,
                right: 30,
                bottom:10,
                top:10,
                containLabel: true
            },

            xAxis: {
                type: 'category',
                // data: ['1001/01', '01/011010', '01/01', '01/01', '01/01', '01/01', '01/01' ,
                //     '01/01', '01/01', '01/01', '01/01' ,'01/0101'],
                data:rqArr,

                axisLabel: {
                    show: false,
                },
                axisLine: {
                    lineStyle: {
                        color: '#0f526b'
                    }
                },
                axisTick: {
                    show: false,
                },
            },
            yAxis: {
                type: 'value',
                min:0,
                // max:20000,
                max:MaxY+10000,
                axisLabel: {
                    show: false,
                },
                axisLine: {
                    show: false,
                },
                axisTick: {
                    show: false,
                },
                splitLine: {
                    show: false,
                    lineStyle: {
                        color: '#112a2f',
                        type: 'solid'
                    }
                },
            },
            series: [{
                // name: '新增确诊',
                type: 'line',
                symbolSize: 4,
                smooth:0.5,
                itemStyle: {
                    normal: {
                        color: "#ff0944",  // 会设置点和线的颜色，所以需要下面定制 line
                    }
                },
                // data: [10000, 18200, 12100, 15400, 11000, 20000, 19100,17400, 10000, 14300,
                //     13100, 12300]
                data: sumArr
            },
            ]
        };
        myChart11.setOption(option);


        $('.tbBar').click(function () {
            $('.tbLine').show();
            $('.tbBar').hide();
        })
        $('.tbLine').click(function () {
            $('.tbLine').hide();
            $('.tbBar').show();
        })
    }

    var initOrgBox06 = function (a,b,c,jgId,jgName) {
        var html = template('tpl-orgBox06', {
            a: a,
            b: b,
            c: c,
            jgId: jgId,
            jgName:jgName
        });
        document.getElementById('orgBox06').innerHTML = html;
        //消息滚动
        $('.mapMess').liMarquee({
            direction: 'up',
            scrolldelay:0,
            scrollamount: 10

        });
    }

    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            if (pair[0] == variable) {
                return pair[1];
            }
        }
        return "";
    }

    var initZypz = function (jgId, jgName) {//初始化-资源配置
        $.axget("/api/yndp/zypz/findZypzByJgId?jgId="+jgId, function (res) {

            initOrgBox01(res.data)
        });
    }

    var initWzbz = function (jgId, jgName) {//初始化-物资保障
        $.axget("/api/yndp/wzbz/findWzbzListByJgId?jgId="+jgId, function (res) {
            initOrgBox02(res.data)
            // console.log("物资保障"+res.data)
        });
    }

    var initFkxc = function (jgId, jgName) {//初始化-防控宣传
        $.axget("/api/yndp/fkxc/getFkxcList?jgId="+jgId, function (res) {
            initOrgBox03(res.data)
        });
    }

    var chartLine01 = echarts.init(document.getElementById('chartLine01'));
    var chartLine02 = echarts.init(document.getElementById('chartLine02'));
    var chartLine03 = echarts.init(document.getElementById('chartLine03'));
    var chartLine04 = echarts.init(document.getElementById('chartLine04'));
    var chartLine05 = echarts.init(document.getElementById('chartLine05'));
    var initYqqs = function (jgId, jgName) {//初始化-疫情趋势
        $.axget("/api/yndp/yqqs/getYqqsChartData?jgid="+jgId+"&rowCount=ALL&yqlx=1", function (res) {
            chartLine01.setOption({
                xAxis:{
                    data:res.data.weekDays
                },
                series:[{
                    name: '新增确诊',
                    data:res.data.yqsl
                }
                ]
            });
        });
        $.axget("/api/yndp/yqqs/getYqqsChartData?jgid="+jgId+"&rowCount=ALL&yqlx=2", function (res) {
            chartLine01.setOption({
                series:[{
                    name: '新增疑似',
                    data:res.data.yqsl
                }
                ]
            });
        });
        $.axget("/api/yndp/yqqs/getYqqsChartData?jgid="+jgId+"&rowCount=ALL&yqlx=3", function (res) {
            chartLine02.setOption({
                xAxis:{
                    data:res.data.weekDays
                },
                series:[{
                    name: '现存确诊',
                    data:res.data.yqsl
                }
                ]
            });
        });
        $.axget("/api/yndp/yqqs/getYqqsChartData?jgid="+jgId+"&rowCount=ALL&yqlx=4", function (res) {
            chartLine02.setOption({
                series:[{
                    name: '现存疑似',
                    data:res.data.yqsl
                }
                ]
            });
        });
        $.axget("/api/yndp/yqqs/getYqqsChartData?jgid="+jgId+"&rowCount=ALL&yqlx=5", function (res) {
            chartLine03.setOption({
                xAxis:{
                    data:res.data.weekDays
                },
                series:[{
                    name: '死亡',
                    data:res.data.yqsl
                }
                ]
            });
        });
        $.axget("/api/yndp/yqqs/getYqqsChartData?jgid="+jgId+"&rowCount=ALL&yqlx=6", function (res) {
            chartLine03.setOption({
                series:[{
                    name: '治愈',
                    data:res.data.yqsl
                }
                ]
            });
        });
        $.axget("/api/yndp/yqqs/getYqqsChartData?jgid="+jgId+"&rowCount=ALL&yqlx=7", function (res) {
            chartLine04.setOption({
                xAxis:{
                    data:res.data.weekDays
                },
                series:[{
                    name: '病死率',
                    data:res.data.yqsl
                }
                ]
            });
        });
        $.axget("/api/yndp/yqqs/getYqqsChartData?jgid="+jgId+"&rowCount=ALL&yqlx=8", function (res) {
            chartLine05.setOption({
                xAxis:{
                    data:res.data.weekDays
                },
                series:[{
                    name: '治愈率',
                    data:res.data.yqsl
                }
                ]
            });
        });
    }

    var chartPie01 = echarts.init(document.getElementById('chartPie01'));
    var chartPie02 = echarts.init(document.getElementById('chartPie02'));
    var chartPie03 = echarts.init(document.getElementById('chartPie03'));
    var chartPie04 = echarts.init(document.getElementById('chartPie04'));
    var initZdrymp = function (jgId, jgName,jgType) {//初始化-重点人员摸排
        console.log(jgType+"=======")
        if(jgType=='2'){
            $("#tab06title").hide();
            $("#tab07title").hide();
            $("#tab08title").show();
            $("#tab09title").show();
            $("#tab2").tab('show')
            $("#tab2").focus()
            $("#tab06").hide();
            $("#tab07").hide();
            $("#tab08").show();
            $("#tab09").show();
        }else {
            $("#tab06title").show();
            $("#tab07title").show();
            $("#tab08title").hide();
            $("#tab09title").hide();
            $("#tab1").tab('show')
            $("#tab1").focus()
            $("#tab06").show();
            $("#tab07").show();
            $("#tab08").hide();
            $("#tab09").hide();
        }
        // 3登记在册
        $.axget("/api/yndp/zdrymp/getZdrympData?jgid="+jgId+"&zdrylx=3", function (res) {
            var pie01rs =0
            var pie01xzrs = 0
            chartPie03.setOption({
                series:[{
                    name: '重点人员摸排',
                    data:(function () {
                        var arrNum = [];
                        var zdrymp = res.data;
                        // console.log(zdrymp)
                        for(var i=0;i<zdrymp.length; i++){
                            arrNum.push({"value": zdrymp[i].zdryrs,"name":zdrymp[i].zdrymc,"xzrs":zdrymp[i].zdryxzrs,"bfb":zdrymp[i].zdryrszb});
                            pie01rs= parseInt(zdrymp[i].zdryrs)+parseInt(pie01rs);
                            pie01xzrs = parseInt(zdrymp[i].zdryxzrs)+parseInt(pie01xzrs);
                        }

                        return arrNum;
                    })()

                }
                ],
                tooltip: {
                    trigger: 'item',
                    formatter:function(data){
                        // console.log(data)
                        return data.name+ " : " + data.value + " ("+data.percent.toFixed(0)+"%)";
                    }
                },
                title: [
                    {text:pie01rs+'人'},{text:'登记在册'},{text:'新增 +'+pie01xzrs+'人'}
                ]
            });
        });
        // 4公安检查点排查人员
        $.axget("/api/yndp/zdrymp/getZdrympData?jgid="+jgId+"&zdrylx=4", function (res) {
            var pie01rs =0
            var pie01xzrs = 0
            chartPie04.setOption({
                series:[{
                    name: '重点人员摸排',
                    data:(function () {
                        var arrNum = [];
                        var zdrymp = res.data;
                        // console.log(zdrymp)
                        for(var i=0;i<zdrymp.length; i++){
                            arrNum.push({"value": zdrymp[i].zdryrs,"name":zdrymp[i].zdrymc,"xzrs":zdrymp[i].zdryxzrs,"bfb":zdrymp[i].zdryrszb});
                            pie01rs= parseInt(zdrymp[i].zdryrs)+parseInt(pie01rs);
                            pie01xzrs = parseInt(zdrymp[i].zdryxzrs)+parseInt(pie01xzrs);
                        }

                        return arrNum;
                    })()

                }
                ],
                tooltip: {
                    trigger: 'item',
                    formatter:function(data){
                        // console.log(data)
                        return data.name+ " : " + data.value + " ("+data.percent.toFixed(0)+"%)";
                    }
                },
                title: [
                    {text:pie01rs+'人'},{text:'公安检查点排查'},{text:'新增 +'+pie01xzrs+'人'}
                ]
            });
        });
        //1 特殊人群
        $.axget("/api/yndp/zdrymp/getZdrympData?jgid="+jgId+"&zdrylx=1", function (res) {
            var pie01rs =0
            var pie01xzrs = 0
            chartPie01.setOption({
                series:[{
                    name: '重点人员摸排',
                    data:(function () {
                        var arrNum = [];
                        var zdrymp = res.data;
                        // console.log(zdrymp)
                        for(var i=0;i<zdrymp.length; i++){
                            arrNum.push({"value": zdrymp[i].zdryrs,"name":zdrymp[i].zdrymc,"xzrs":zdrymp[i].zdryxzrs,"bfb":zdrymp[i].zdryrszb});
                            pie01rs= parseInt(zdrymp[i].zdryrs)+parseInt(pie01rs);
                            pie01xzrs = parseInt(zdrymp[i].zdryxzrs)+parseInt(pie01xzrs);
                        }

                        return arrNum;
                    })()

                }
                ],
                tooltip: {
                    trigger: 'item',
                    formatter:function(data){
                        // console.log(data)
                        return data.name+ " : " + data.value + " ("+data.percent.toFixed(0)+"%)";
                    }
                },
                title: [
                    {text:pie01rs+'人'},{text:'特殊人群'},{text:'新增 +'+pie01xzrs+'人'}
                ]
            });
        });
        // 2 入住留验点人员
        $.axget("/api/yndp/zdrymp/getZdrympData?jgid="+jgId+"&zdrylx=2", function (res) {
            var pie01rs =0
            var pie01xzrs = 0
            chartPie02.setOption({
                series:[{
                    name: '重点人员摸排',
                    data:(function () {
                        var arrNum = [];
                        var zdrymp = res.data;
                        // console.log(zdrymp)
                        for(var i=0;i<zdrymp.length; i++){
                            arrNum.push({"value": zdrymp[i].zdryrs,"name":zdrymp[i].zdrymc,"xzrs":zdrymp[i].zdryxzrs,"bfb":zdrymp[i].zdryrszb});
                            pie01rs= parseInt(zdrymp[i].zdryrs)+parseInt(pie01rs);
                            pie01xzrs = parseInt(zdrymp[i].zdryxzrs)+parseInt(pie01xzrs);
                        }

                        return arrNum;
                    })()

                }
                ],
                tooltip: {
                    trigger: 'item',
                    formatter:function(data){
                        // console.log(data)
                        return data.name+ " : " + data.value + " ("+data.percent.toFixed(0)+"%)";
                    }
                },
                title: [
                    {text:pie01rs+'人'},{text:'入住留验点人员'},{text:'新增 +'+pie01xzrs+'人'}
                ]
            });
        });


    }

    var initPclk = function (jgId, jgName) {//初始化-网格化排查及联防联控
        $.axget("/api/yndp/wghpclflk/getPcjlflkList?jgId="+jgId, function (res) {
            initOrgBox04(res.data)
        });
    }

    var initRyzz = function (jgId, jgName) {//初始化-疫区来昆人员追踪
        var data = null;
        var sumChart = null;
        $.axget1("/api/yndp/yqlkryzz/getSameDay?jgId="+jgId,false, function (res) {
            data = res;
        });

        $.axget1("/api/yndp/yqlkryzz/getChartData?jgId="+jgId,false, function (resp) {
            sumChart= resp.data;
        });

        initOrgBox05(data,sumChart);
    }



    var initdt = function (jgId, jgName) {//初始化-地图
        var a ='';
        var b ='';
        var c ='';
        $.axget1("/api/yndp/map/getMapSjList?jgId="+jgId,false, function (res) {
            a=res.data;
        });
        $.axget1("/api/yndp/map/getMapHzsjList?jgId="+jgId,false, function (res) {
            b=res.data;
        });
        $.axget1("/api/yndp/map/getMapList?qzlx=1&jgId="+jgId,false, function (res) {
            c=res.data;
            setMyMapChartData(c,jgName);
        });
        if(a && b && c)
            initOrgBox06(a,b,c,jgId, jgName);
        else
            initOrgBox06({},{},{},jgId, jgName);
    }

    var initMap = function (jgId,jgName, call) {
        $("#chart-panel").removeAttr("_echarts_instance_").empty();
        //echartsMap();
        $.getJSON(jiangxi, function (geoJson) {
            echarts.registerMap('经开区', geoJson);
            var myChart = echarts.extendsMap('chart-panel', {
                bgColor: '#404a59', // 画布背景色
                mapName: '经开区',    // 地图名
                goDown: true,       // 是否下钻
                // 下钻回调
                callback: function (name, option, instance) {
                    if(name === "经开区")
                        jname = '区疫情防控指挥部'
                    else
                        jname = name
                    $.axget1("/api/yndp/glgz/getJgId?jgmc="+ jname,false, function (res) {
                        // myChart.setInitData('经开区')
                        initZypz(res.data.id, name)
                        initWzbz(res.data.id, name)
                        initFkxc(res.data.id, name)
                        initYqqs(res.data.id, name);
                        initZdrymp(res.data.id,name,res.data.jglx);
                        initPclk(res.data.id, name)
                        initRyzz(res.data.id, name)
                        initdt(res.data.id, name)
                        initMiddleBottomQs(res.data.id,name,res.data.jglx);
                    });
                }
            });

            myChart.setInitData('经开区')
            // myChart.setMap(jgName )
            // initdt(jgId,jgName)

            if(call)
                call(jgId,jgName)
        })
    }


    var initHtml = function (jgId, jgName,jgType) {
        initZypz(jgId, jgName)
        initWzbz(jgId, jgName)
        initFkxc(jgId, jgName)
        initYqqs(jgId, jgName);
        initZdrymp(jgId,jgName,jgType);
        initPclk(jgId, jgName)
        initRyzz(jgId, jgName)
        initMap(jgId, jgName, initdt)

        initMiddleBottomQs(jgId,jgName,jgType);

    }


    var initHtmlNoMap = function (jgId, jgName,jgType) {
        initZypz(jgId, jgName)
        initWzbz(jgId, jgName)
        initFkxc(jgId, jgName)
        initYqqs(jgId, jgName);
        initZdrymp(jgId,jgName,jgType);
        initPclk(jgId, jgName)
        initRyzz(jgId, jgName)
        // initMap(jgId, jgName)
        //myMapChart.setMap("阿拉街道",jgName,initMaps)

        initMap(jgId, jgName, initMapsx)


        // initdt(jgId, jgName)
    }

    function initMapsx(jgId,jgName){

        if(jgName=='阿拉街道'||jgName=='洛羊街道'){
            myMapChart.setMap(jgName)
        }else{
            var pname='洛羊街道';
            var nmap = {
                '阿拉社区':true,
                '石坝社区':true,
                '普照社区':true,
                '清水社区':true,
                '高坡社区':true,
                '海子社区':true,
                '顺通社区':true,
                '云知社区':true,
                '八公里社区':true,
                '昌宏社区':true,
                '云南航天社区':true,
                '昆船社区':true,
                '长春社区':true
            }
            if(nmap[jgName]){
                pname = '阿拉街道'
            }
            myMapChart.setMap(pname,jgName,initMaps)
        }
    }

    function initMaps(jgName){
        myMapChart.setMap(jgName)
    }


    $(document).ready(function () {
        $.axget("/api/yndp/sjsjgx/getGxsj", function (res) {
            initTime(res.data);
        });

        initWebSocket(2,function(e){
            var jgId = e.jgId;
            var jgName = e.jgName;
            var jgType = e.jgType;
            // console.log("!!!!!"+jgId)
            // console.log("!!!!!"+jgName)
            initHtmlNoMap(jgId, jgName,jgType);
        })
        // var jgId = getQueryVariable("jgId")
        // var jgName = getQueryVariable("jgName")
        // initHtml(jgId, jgName)

        $.axget1("/api/yndp/glgz/getJgId?jgmc="+ '区疫情防控指挥部',false, function (res) {
            initHtml(res.data.id, '经开区',res.data.jglx)
        });

    });


   /* $('.sNext').click(function () {
        var od = $(this).attr("value");
        console.log("sNext-od="+od);
        $(this).removeClass('hover')
        $('.sPrev').addClass('hover')
        if(od=='2'){
            $('.tab01Wrap').find('.page01').hide();
            $('.tab01Wrap').find('.page02').show();
            $('.tab01Wrap').find('.page03').show();
            $('.tab01Wrap').find('.page04').hide();
        }else{
            $('.tab01Wrap').find('.page01').hide();
            $('.tab01Wrap').find('.page02').show();
            $('.tab01Wrap').find('.page03').hide();
            $('.tab01Wrap').find('.page04').show();
        }
    })

    $('.sPrev').click(function () {
        var od = $(this).attr("value");
        console.log("sPrev-od="+od);
        $(this).removeClass('hover')
        $('.sNext').addClass('hover')
        if(od=='2'){
            $('.tab01Wrap').find('.page01').show();
            $('.tab01Wrap').find('.page02').hide();
            $('.tab01Wrap').find('.page03').show();
            $('.tab01Wrap').find('.page04').hide();
        }else{
            $('.tab01Wrap').find('.page01').show();
            $('.tab01Wrap').find('.page02').hide();
            $('.tab01Wrap').find('.page03').hide();
            $('.tab01Wrap').find('.page04').show();
        }
    })*/


    // 网格化排查
    var secondWghpcgzqkCharLine = echarts.init(document.getElementById('secondWghpcgzqkCharLine'));
    // 联防联控工作情况
    var secondLflkChartLine = echarts.init(document.getElementById('secondLflkChartLine'));
    // 排查特殊人群情况
    var secondPctsrqqkBar = echarts.init(document.getElementById('secondPctsrqqkBar'));
    //入住留验点人员情况
    var secondRzlydryBar = echarts.init(document.getElementById('secondRzlydryBar'));
    // 登记在册人员排查
    var secondDjzcrypcBar = echarts.init(document.getElementById('secondDjzcrypcBar'));
    //公安检查点排查情况
    var secondGajcdpcqkBar = echarts.init(document.getElementById('secondGajcdpcqkBar'));
    //疫区来昆人员统计
    var secondYqlkrytjChartLine = echarts.init(document.getElementById('secondYqlkrytjChartLine'));

    // 切换下方趋势图
    function toggleChart(type){
        // 将首字母变成大写
        var name = type;
        // 将所有字符变成小写
        name = name.toLowerCase();
        // 提取首字母转换为大写并与其余的字母拼接起来(3种方法)
        var name = name.charAt(0).toUpperCase() + name.slice(1);
        // 切换下方按钮
        $('.tab01Wrap').find('.page01').hide();
        $('.tab01Wrap').find('.page02').show();
        if(selectType=='2'){
            $('.tab01Wrap').find('.page03').hide();
            $('.tab01Wrap').find('.page04').show();
        }else{
            $('.tab01Wrap').find('.page03').show();
            $('.tab01Wrap').find('.page04').hide();
        }
        // 根据类型切换tab
        $('#tab_btn a[href="#tab'+name+'"]').tab('show');
    }

    // 控制底部按钮  街道或这区显示隐藏
    var initBottomSwitch = function(jgType){
        var html = template('tpl-orgBoxBottomSwitch', {type:jgType});
        document.getElementById('orgBoxBottomSwitch').innerHTML = html;

        // tab01
        $('#tab_btn a[href="#tab01"]').tab('show');
        $('.tab01Wrap').find('.page01').show();
        $('.tab01Wrap').find('.page02').hide();
        $('.tab01Wrap').find('.page03').hide();
        $('.tab01Wrap').find('.page04').hide();

        $('.sNext').click(function () {
            var od = $(this).attr("value");
            $(this).removeClass('hover');
            $('.sPrev').addClass('hover');
            if(od=='2'){
                $('.tab01Wrap').find('.page01').hide();
                $('.tab01Wrap').find('.page02').show();
                $('.tab01Wrap').find('.page03').hide();
                $('.tab01Wrap').find('.page04').show();

            }else{
                $('.tab01Wrap').find('.page01').hide();
                $('.tab01Wrap').find('.page02').show();
                $('.tab01Wrap').find('.page03').show();
                $('.tab01Wrap').find('.page04').hide();
            }
        })

        $('.sPrev').click(function () {
            var od = $(this).attr("value");
            $(this).removeClass('hover');
            $('.sNext').addClass('hover');
            if(od=='2'){
                $('.tab01Wrap').find('.page01').show();
                $('.tab01Wrap').find('.page02').hide();
                $('.tab01Wrap').find('.page03').hide();
                $('.tab01Wrap').find('.page04').hide();
            }else{
                $('.tab01Wrap').find('.page01').show();
                $('.tab01Wrap').find('.page02').hide();
                $('.tab01Wrap').find('.page03').hide();
                $('.tab01Wrap').find('.page04').hide();
            }
        })
    }

    var selectType='';

    var initMiddleBottomQs = function(jgId, jgName,jgType){
        selectType=jgType;
        initBottomSwitch(jgType);
        // 网格化排查echarts   联防联控echarts
        $.axget1("/api/yndp/wghpclflk/getPcjlflkListAll?jgId="+jgId,false, function (res) {
            // console.log("_____---网格化排查--联防联控---_____");
            // console.log(res.data);
            //网格化排查echarts
            var xAxisData = [];
            var wghYjrcjpcryzs=[];
            var wghYljcjpcryzs=[];
            var wghYjrpcrs=[];
            var wghYljpczrs=[];
            //联防联控echarts
            var lflkYjrxzwxqsl=[]; //今日新增微信群数量
            var lflkYwxqzl=[]; //微信群总量
            var lflkYwxqfgl=[]; //微信群覆盖率
            for (let i = 0; i < res.data.length; i++) {
                //网格化排查
                xAxisData.push(res.data[i].field5);
                wghYjrcjpcryzs.push(res.data[i].fdcjpcryzsxz);//发动参加排查人员总数-新增
                wghYljcjpcryzs.push(res.data[i].fdcjpcryzslj);//发动参加排查人员总数-累计
                wghYjrpcrs.push(res.data[i].pczrslj); //排查总人数-新增
                wghYljpczrs.push(res.data[i].pczrsxz); //排查总人数-累计
                // 联防联控
                lflkYjrxzwxqsl.push(res.data[i].pczrsxz); //今日新增微信群数量
                lflkYwxqzl.push(res.data[i].pczrslj); //微信群总量
                lflkYwxqfgl.push(res.data[i].fxqfgllj); ////微信群覆盖率

            }
            // 网格化排查
            secondWghpcgzqkCharLine.setOption({
                    xAxis:{
                        data:xAxisData
                    },
                    series: [
                        {
                            name: '今日参加排查人员总数',
                            data: wghYjrcjpcryzs
                        },
                        {
                            name: '累计参加排查人员总数',
                            data: wghYljcjpcryzs
                        },
                        {
                            name: '今日排查人数',
                            data: wghYjrpcrs
                        },
                        {
                            name: '累计排查总人数',
                            data: wghYljpczrs
                        }

                    ]
            });

            // 联防联控
            secondLflkChartLine.setOption({
                xAxis:{
                    data:xAxisData
                },
                series: [
                    {
                        name: '今日新增微信群数量',
                        data: lflkYjrxzwxqsl
                    },
                    {
                        name: '微信群总量',
                        data: lflkYwxqzl
                    },
                    {
                        name: '微信群覆盖率',
                        yAxisIndex: 1,
                        data: lflkYwxqfgl
                    }

                ]
            });
        });

        // console.log("-----------------------------------");
        // console.log(jgId);
        // 重点人员摸排
        $.axget("/api/yndp/zdrymp/getZdrympDataListAll?jgid="+jgId, function (res) {
            // console.log("_____----重点人员摸排----_____");
            // console.log(res.data);

            //登记在册人员排查
            var xjdzcAxisData = [];
            var yLkyk = [];//来昆游客
            var yWgqxhkry = [];//务工求学回昆人员
            var yJqdgyqry = [];//近期到过疫区人员
            for (let i = 0; i < res.data.djzcList.length; i++) {
                xjdzcAxisData.push(res.data.djzcList[i].field4);
                if(res.data.djzcList[i].zdrymc == '来昆游客'){
                    yLkyk.push(res.data.djzcList[i].zdryrs);
                }else if(res.data.djzcList[i].zdrymc == '务工求学回昆人员'){
                    yWgqxhkry.push(res.data.djzcList[i].zdryrs);
                }else if(res.data.djzcList[i].zdrymc == '近期到过疫区人员'){
                    yJqdgyqry.push(res.data.djzcList[i].zdryrs);
                }else{

                }
            }

            secondDjzcrypcBar.setOption({
                xAxis:{
                    data:uniq(xjdzcAxisData)
                },
                series: [
                    {
                        name: '来昆游客',
                        data: yLkyk
                    },
                    {
                        name: '务工求学回昆人员',
                        data: yWgqxhkry
                    },
                    {
                        name: '近期到过疫区人员',
                        data: yJqdgyqry
                    }
                ]
            });


            //公安检查点排查
            var xGajcdpcAxisData = [];
            var yZcData =[];//正常
            var yYcData =[];//异常
            for (let i = 0; i < res.data.gajcdpcryList.length ; i++) {
                xGajcdpcAxisData.push(res.data.gajcdpcryList[i].field4);
                if (res.data.gajcdpcryList[i].zdrymc == '正常'){
                    yZcData.push(res.data.gajcdpcryList[i].zdryrs);
                }else if(res.data.gajcdpcryList[i].zdrymc == '异常'){
                    yYcData.push(res.data.gajcdpcryList[i].zdryrs);
                }else{

                }
            }
            secondGajcdpcqkBar.setOption({
                xAxis: [{
                    data: uniq(xGajcdpcAxisData)
                }],
                series: [
                    {
                        name: '正常',
                        data: yZcData
                    },
                    {
                        name: '异常',
                        data: yYcData
                    }
                ]
            });


            //入驻留验点人员
            //
            var xRzlyzdAxisData = [];
            var yMaleData = []; // 男性
            var yFemaleData = []; // 女性
            for (let i = 0; i < res.data.rzlydryList.length; i++) {
                xRzlyzdAxisData.push(res.data.rzlydryList[i].field4);
                if(res.data.rzlydryList[i].zdrymc == '男性'){
                    yMaleData.push(res.data.rzlydryList[i].zdryrs);
                }else if(res.data.rzlydryList[i].zdrymc == '女性'){
                    yFemaleData.push(res.data.rzlydryList[i].zdryrs);
                }else{
                }
            }
            secondRzlydryBar.setOption({
                xAxis:{
                    data:uniq(xRzlyzdAxisData)
                },
                series: [{
                    name: '男性',
                    data: yMaleData
                },
                    {
                        name: '女性',
                        data: yFemaleData
                    }
                ]
            });


            //排查特殊人群数量
            var xPctsrqslAxisData = [];
            var yWgfkData = [];//务工返昆
            var ySxfkData = [];//上学返昆
            var yYqlklyData = [];//疫区来昆旅游
            var yJqdgyqData = [];//近期到过疫区
            var yQtData = [];//其他
            for (let i = 0; i < res.data.tsrqList.length; i++) {
                xPctsrqslAxisData.push(res.data.tsrqList[i].field4);
                if(res.data.tsrqList[i].zdrymc == '务工返昆'){
                    yWgfkData.push(res.data.tsrqList[i].zdryrs);
                }else if(res.data.tsrqList[i].zdrymc == '上学返昆'){
                    ySxfkData.push(res.data.tsrqList[i].zdryrs);
                }else if(res.data.tsrqList[i].zdrymc == '疫区来昆旅游'){
                    yYqlklyData.push(res.data.tsrqList[i].zdryrs);
                }else if(res.data.tsrqList[i].zdrymc == '近期到过疫区'){
                    yJqdgyqData.push(res.data.tsrqList[i].zdryrs);
                }else if(res.data.tsrqList[i].zdrymc == '其他'){
                    yQtData.push(res.data.tsrqList[i].zdryrs);
                }
            }
            secondPctsrqqkBar.setOption({
                xAxis:{
                    data:uniq(xPctsrqslAxisData)
                },
                series: [
                        {
                            name: '疫区来昆游客',
                            data: yYqlklyData
                        },
                        {
                            name: '务工返昆',
                            data: yWgfkData
                        },
                        {
                            name: '上学返昆',
                            data: ySxfkData
                        },
                        {
                            name: '近期到过疫区',
                            data: yJqdgyqData
                        },
                        {
                            name: '其他',
                            data: yQtData
                        }
                    ]
            });

        });

        // 疫区来昆人员追踪
        $.axget("/api/yndp/yqlkryzz/getChartDataList?jgId="+jgId, function (res) {
            // console.log("_____----疫区来昆人员追踪----_____");
            // console.log(res.data);
            var xAxisData = [];
            var yYzdlgData = [];//已住店离观
            var yLkData = [];//离昆
            var yGlqg14tData = [];//隔离期过14天
            var yBzxqjzdData = [];//不在辖区居住地
            var yJcyxgcryData = [];//解除医学观察人员
            var yRzzdjdData = [];//入住指定的酒店
            var yHbywqtdfhkryData = [];//湖北以外其他地方回昆人员
            var yQtData = [];//其他
            var yZsData = [];//总数

            for (let i = 0; i < res.data.length ; i++) {
               xAxisData.push(res.data[i].rq);
               if(res.data[i].rylx == '已住店离观'){
                   yYzdlgData.push(res.data[i].rysl);
               }else if(res.data[i].rylx == '离昆'){
                   yLkData.push(res.data[i].rysl);
               }else if(res.data[i].rylx == '隔离期过14天'){
                   yGlqg14tData.push(res.data[i].rysl);
               }else if(res.data[i].rylx == '不在辖区居住地'){
                   yBzxqjzdData.push(res.data[i].rysl);
               }else if(res.data[i].rylx == '解除医学观察人员'){
                   yJcyxgcryData.push(res.data[i].rysl);
               }else if(res.data[i].rylx == '入住指定的酒店'){
                   yRzzdjdData.push(res.data[i].rysl);
               }else if(res.data[i].rylx == '湖北以外其他地方回昆人员'){
                   yHbywqtdfhkryData.push(res.data[i].rysl);
               }else if(res.data[i].rylx == '其他'){
                   yQtData.push(res.data[i].rysl);
               }else if(res.data[i].rylx == '总数'){
                   yZsData.push(res.data[i].rysl);
               }
            }
            secondYqlkrytjChartLine.setOption({
                legend: {
                    selected:{
                        '解除医学观察人员':false,
                        '其他':false,
                        '累计排查总人数':false,
                        '湖北以外其他地方回昆人员':false,
                        '入住指定的如家商旅酒店':false
                    }
                },
                xAxis: {
                    data: uniq(xAxisData)
                },
                series: [
                    {
                        name: '已住店离观',
                        data: yYzdlgData
                    },
                    {
                        name: '离昆',
                        data: yLkData
                    },
                    {
                        name: '隔离期过14天',
                        data: yGlqg14tData
                    },
                    {
                        name: '不在辖区居住地',
                        data: yBzxqjzdData
                    }
                    ,
                    {
                        name: '解除医学观察人员',
                        data: yJcyxgcryData
                    },
                    {
                        name: '其他',
                        data: yQtData
                    } ,
                    {
                        name: '湖北以外其他地方回昆人员',
                        data: yHbywqtdfhkryData
                    } ,
                    {
                        name: '入住指定的如家商旅酒店',
                        data: yRzzdjdData
                    }

                ]
            });

        });
    }


    // 点击中下按钮，右边重点人员摸排跟着动
    function changeRight(type){
            if(type=='pctsrqqk'){//排查特殊人群情况
                $("#tab1").tab('show')
            }else if(type=='rzlydryqk'){//入住留验点人员情况
                $("#tab3").tab('show')
            }else if(type=='djzc'){//登记在册人员排查
                $("#tab2").tab('show')
            }else if(type=='gajcdpcqk'){//公安检查点排查情况
                $("#tab4").tab('show')
            }else{

            }
    }

   // 数组去重
    function uniq(array){
        var temp = []; //一个新的临时数组
        for(var i = 0; i < array.length; i++){
            if(temp.indexOf(array[i]) == -1){
                temp.push(array[i]);
            }
        }
        return temp;
    }

</script>
</body>
</html>